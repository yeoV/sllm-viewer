FROM  python:3.11.7-alpine3.18
LABEL author="lsy"

ARG APP_VERSION=0.1.0

RUN apk update \
    && apk add poetry \
    && apk cache clean

ADD ./dist/viewer-${APP_VERSION}.tar.gz /sllm-viewer/

WORKDIR /sllm-viewer/viewer-${APP_VERSION}

COPY poetry.lock .

RUN poetry install

EXPOSE 8501

ENTRYPOINT [ "streamlit", "run" ]

CMD [ "viewer/frontend/test.py" ]